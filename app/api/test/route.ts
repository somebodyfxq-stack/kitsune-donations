import { NextRequest, NextResponse } from 'next/server'; import { broadcastDonation } from '@/lib/sse';
export async function POST(req: NextRequest){ let b:any={}; try{b=await req.json()}catch{} const payload={identifier:'TEST-'+Math.random().toString(36).slice(2,8).toUpperCase(),nickname:b?.nickname||'kitsune_fan',message:b?.message||'Це тестове повідомлення',amount:Number(b?.amount)||50,createdAt:new Date().toISOString()}; broadcastDonation(payload); return NextResponse.json({ok:true,sent:payload})}
